% hw2a.tex - Comp356 HW 2A Answers

% Declare page size and style.
\documentclass[a4paper, 12pt]{article}
\pagestyle{plain}
\usepackage{fullpage}

% Declare which packages to use..
\usepackage{amsmath}
\usepackage{amssymb}

% Define custom commands for the document.
\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}

\input{./utils.tex}

\begin{document}
\hwheader{Comp 356: Computer Graphics\\Homework 2A: Ray-tracing geometry}

\begin{enumerate}
    \item \textbf{Problem:} Assuming the standard camera frame based on the viewpoint, look-at point, and up- direction, compute the camera frame basis expressed as linear combinations of the standard basis.  Your camera frame basis must be orthonormal.

        \textbf{Solution:} First, we must compute the vectors that will compose our basis \(\vec{u}, \vec{v}, \vec{w}\).
        \(\vec{w}\) is opposite the view direction so
        %Compute w
        \begin{align*}
        \vec{w} =& \frac{\vec{e} - \vec{P}}{\norm{\vec{e} - \vec{P}}}\\
        \vec{e} - \vec{P} =& (4,4,4) - (-1,-1,-1) = (3,3,3)\\
        \vec{w} =& \frac{(3,3,3)}{\norm{(3,3,3)}} = \frac{(3,3,3)}{\sqrt{3^2 + 3^2 + 3^2}} = \fbox{$(\frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}})$}\\
        %Compute u
        \vec{u} =& \frac{\vec{up} \times \vec{w}}{\norm{\vec{up} \times \vec{w}}}\\
        \vec{up} \times \vec{w} =& (0,1,0) \times (\frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}})\\
        \vec{up} \times \vec{w} =& (1\frac{1}{\sqrt{3}} - 0\frac{1}{\sqrt{3}}, 0\frac{1}{\sqrt{3}} - 0\frac{1}{\sqrt{3}}, 0\frac{1}{\sqrt{3}} - 1\frac{1}{\sqrt{3}}) = (\frac{1}{\sqrt{3}}, 0, -\frac{1}{\sqrt{3}}) \\
        \vec{u} =& \frac{(\frac{1}{\sqrt{3}}, 0, -\frac{1}{\sqrt{3}})}{\norm{(\frac{1}{\sqrt{3}}, 0, -\frac{1}{\sqrt{3}}}} = \frac{(\frac{1}{\sqrt{3}}, 0, -\frac{1}{\sqrt{3}})}{\sqrt{\frac{1}{\sqrt{3}}^2 + 0^2 - \frac{1}{\sqrt{3}}^2}} = \frac{(\frac{1}{\sqrt{3}}, 0, -\frac{1}{\sqrt{3}})}{\sqrt{\frac{2}{3}}} = \fbox{$(\frac{1}{\sqrt{2}}, 0, -\frac{1}{\sqrt{2}})$}\\
        %Compute v
        \vec{v} =& \vec{w} \times \vec{u} = (\frac{1}{\sqrt{2}}, 0, -\frac{1}{\sqrt{2}}) \times (\frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}}, \frac{1}{\sqrt{3}})\\
        &\text{Dot product calculation is same as above, omitted for brevity.}\\
        \vec{v} =& \fbox{$(-\frac{1}{\sqrt{6}}, \frac{2}{\sqrt{6}}, -\frac{1}{\sqrt{6}} $}\\
        %Show as linear combination of standard basis
        &\text{These vectors form the orthonormal basis for the camera frame and}\\
        &\text{can be expressed as linear combinations of the standard basis:}\\
        \vec{u} =& \frac{1}{\sqrt{2}}\vec{i} + 0\vec{j} -\frac{1}{\sqrt{2}}\vec{k}\\
        \vec{v} =& \frac{1}{\sqrt{2}}\vec{i} + 0\vec{j} -\frac{1}{\sqrt{2}}\vec{k}\\
        \vec{w} =& \frac{1}{\sqrt{3}}\vec{i} + \frac{1}{\sqrt{3}}\vec{j} + \frac{1}{\sqrt{3}}\vec{k}\\
        \end{align*}

    \item \textbf{Problem:} Assuming the standard viewing rectangle that lies in a plane that is orthogonal to \(\vec{w}\) and such that \(\vec{e} - t\vec{w}\) intersects the viewing rectangle in its center, give the coordinates of the lower-left and upper-right corners of the view rectangle in the world frame.

        \textbf{Solution:}Let the view rectangle have width (W) = 8 units and height (H) = 6 units and d = 1. The lower-left coordinate of the view rectangle is \( ( $-$\frac{W}{2}, \frac{H}{2}, $-$d) \) and the upper-right coordinate is \( (\frac{W}{2}, \frac{H}{2}, $-$d) \). However, the view rectangle is defined in the camera frame $\vec{u}$, $\vec{v}$, $\vec{w}$ so the lower-left point is:
        \begin{align*}
            &( -\frac{W}{2}\vec{u}, \frac{H}{2}\vec{v}, -d\vec{w})\\
            &\text{W=8, H=6, D=1, so we get}\\
            &= (-4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{lower left} &= \text{viewpoint $\vec{e}$} + (-4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{lower left} &= (4,4,4) + (-4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{lower left} &= 4\vec{i}, 4\vec{j}, 4\vec{k} + (-4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{lower left} &= 4\vec{i}, 4\vec{j}, 4\vec{k} + -4(.707, 0, -.707) + 3(-.407, .815, -.407) - 1(.577, .577, .577)\\
            P_{lower left} &= 4\vec{i}, 4\vec{j}, 4\vec{k} + -4(.707\vec{i} + 0\vec{j} - .707\vec{k}) + 3(-.407\vec{i} + .815\vec{j} - .407\vec{k}) - 1(.577\vec{i} + .577\vec{j} + .577\vec{k})\\
            P_{lower left} &= -.626\vec{i} + 5.868\vec{j} + 5.03\vec{k}
        \end{align*}
        And we repeat this process to find the upper-right corner coordinate, beginning with it being defined in the camera frame as \( (\frac{W}{2}, \frac{H}{2}, -d) \).
        \begin{align*}
            &= (4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{upper right} &= (4,4,4) + (4\vec{u}, 3\vec{v}, -1\vec{w})\\
            P_{upper right} &= 4\vec{i}, 4\vec{j}, 4\vec{k} + 4(.707, 0, -.707) + 3(-.407, .815, -.407) - 1(.577, .577, .577)\\
            P_{upper right} &= 4\vec{i}, 4\vec{j}, 4\vec{k} + 4(.707\vec{i} + 0\vec{j} - .707\vec{k}) + 3(-.407\vec{i} + .815\vec{j} - .407\vec{k}) - 1(.577\vec{i} + .577\vec{j} + .577\vec{k})\\
            P_{upper right} &= 5.03\vec{i} + 5.868\vec{j} -.626\vec{k}
        \end{align*}

    \item \textbf{Problem:} Let $\vec{r}$ = $\vec{e}$ + t$\vec{d}$ be the viewing ray through pixel (400, 300). What is d in the world
frame?

        \textbf{Solution:} We know that at time t = 1, the corresponding point on the ray is on the view rectangle. Because our view rectangle is defined in the camera frame,  We first linearly map the screen pixel (400, 300) to our view rectangle of $n_x$ $\times$ $n_y$ pixels.
    \begin{align*}
        &\text{The pixel$(i, j)$ is mapped to $u$ = $-\frac{W}{2} + \frac{i + 0.5}{n_x}W$ and $v$ = $-\frac{H}{2} + \frac{j + 0.5}{n_y}H$ so}\\
        &(400, 300) : u = -\frac{8}{2} + \frac{400 + 0.5}{800}8 = 0.005 \text{ and } v = -\frac{6}{2} + \frac{300 + 0.5}{600}6 = 0.005\\
        &\text{The view rectangle is 1 unit from the viewpoint $\vec{e}$ (d = 1) so the ray direction is}\\
        &-d\vec{w} + u\vec{u} + v\vec{v} = 0.005\vec{u} + 0.005\vec{v} - 1\vec{w}\\
        &\text{and the ray origin is $\vec{e}$ so our ray $\vec{r}$ is:}\\
        &\vec{r} = \vec{e} + t\vec{d}\\
        &\text{\textbf{Note:} at time t = 1, the ray describes the point on the view rectangle.}\\
        &\text{So to calculate $d$ in the world frame we set t=1 and calculate:}\\
        &\vec{r} = \vec{e} + (1)\vec{d} = \\
        &\vec{r} = 4\vec{i}, 4\vec{j}, 4\vec{k} + 0.005\vec{u} + 0.005\vec{v} - 1\vec{w}\\
        &\vec{r} = 4\vec{i}, 4\vec{j}, 4\vec{k} + 0.005(.707\vec{i} + 0\vec{j} - .707\vec{k}) + 0.005(-.407\vec{i} + .815\vec{j} - .407\vec{k}) - 1(.577\vec{i} + .577\vec{j} + .577\vec{k})\\
        &\vec{r} = 
    \end{align*}

\end{enumerate}
\end{document}
